{
  "master": {
    "tasks": [
      {
        "id": 11,
        "title": "Setup Project Infrastructure and Database Schema",
        "description": "Initialize the project monorepo, configure CI/CD with GitHub Actions, and implement the database schema for the F1 Picks application.",
        "details": "1. Create a single monorepo with organized subdirectories for frontend (Next.js) and backend (FastAPI)\n2. Set up GitHub Actions workflows for linting, type-checking, testing, and deployment\n3. Configure deployment to Vercel (frontend) and Fly.io (backend + workers)\n4. Implement Postgres database schema with the following models:\n   - Users: id, email, name, photo_url, created_at\n   - Leagues: id, name, description, is_global, created_at\n   - LeagueMembers: user_id, league_id, joined_at\n   - Events: id, name, circuit_id, start_time, end_time, type (race/qualifying/practice), status\n   - Picks: id, user_id, event_id, prop_type, prop_value, created_at\n   - Results: id, event_id, prop_type, actual_value, source, ingested_at\n   - Scores: id, pick_id, points, margin, created_at\n   - Audit: id, entity_type, entity_id, action, metadata, created_at\n5. Set up database migrations using Alembic\n6. Configure connection pooling and environment variables",
        "testStrategy": "1. Verify CI/CD pipeline runs successfully on pull requests\n2. Test database migrations up and down\n3. Validate schema constraints and relationships\n4. Ensure proper indexing for query performance\n5. Write unit tests for database models and their relationships",
        "priority": "high",
        "dependencies": [],
        "status": "done",
        "subtasks": [
          {
            "id": 1,
            "title": "Create and Configure Project Monorepo",
            "description": "Set up a single monorepo with organized subdirectories for frontend (Next.js) and backend (FastAPI) with unified project structure and configuration files.",
            "dependencies": [],
            "details": "1. Create a single GitHub repository with a monorepo structure\n2. Set up the following directory structure:\n   - /frontend (Next.js with TypeScript)\n   - /backend (FastAPI with Python 3.9+)\n   - /shared (for shared utilities, types, and configurations)\n3. Initialize Next.js project with TypeScript in the frontend directory\n4. Set up FastAPI project with Python 3.9+ in the backend directory\n5. Configure root-level ESLint, Prettier, and TypeScript for the entire project\n6. Set up Black, isort, and mypy for the backend directory\n7. Create a comprehensive README file at the root with project overview, architecture explanation, and setup instructions\n8. Configure a unified .gitignore file at the root level with appropriate rules for both frontend and backend\n9. Set up package.json at the root with workspace configuration and common development scripts\n10. Create requirements.txt and dev-requirements.txt in the backend directory\n11. Implement a unified build and development setup with scripts that can run both services\n12. Configure workspace-specific settings for VS Code or other IDEs",
            "status": "done",
            "testStrategy": "1. Verify project initialization scripts run without errors\n2. Test linting configurations work correctly\n3. Ensure development servers can be started\n4. Validate TypeScript configuration",
            "parentId": "undefined",
            "updatedAt": "2025-09-26T03:56:27.538Z"
          },
          {
            "id": 2,
            "title": "Implement CI/CD Pipelines with GitHub Actions",
            "description": "Configure GitHub Actions workflows for linting, testing, and deployment for the monorepo containing both frontend and backend.",
            "dependencies": [
              "11.1"
            ],
            "details": "1. Create .github/workflows directory in the monorepo root\n2. Implement unified CI workflow with:\n   - Node.js setup for frontend\n   - Python setup for backend\n   - Dependency installation for both services\n   - Linting with ESLint (frontend) and Black/isort (backend)\n   - Type checking with TypeScript and mypy\n   - Unit tests with Jest (frontend) and pytest (backend)\n   - Build verification for both services\n3. Configure Vercel deployment for frontend subdirectory\n4. Set up Fly.io deployment for backend subdirectory\n5. Add deployment workflows triggered on main branch merges\n6. Configure environment secrets for deployments\n7. Implement path-based workflow triggers for efficient CI\n<info added on 2025-09-26T04:03:07.501Z>\n8. Implement semantic versioning with release-please:\n   - Configure release-please GitHub Action for monorepo structure\n   - Set up separate versioning for frontend and backend components\n   - Configure conventional commit parsing for automated version bumping\n   - Implement automated changelog generation based on commit history\n   - Configure release creation workflow triggered by version bump PRs\n   - Add release-please configuration file with appropriate release types\n   - Set up manifest file to track component versions\n</info added on 2025-09-26T04:03:07.501Z>",
            "status": "done",
            "testStrategy": "1. Test workflows by making pull requests\n2. Verify all CI checks run successfully\n3. Test deployment to staging environments\n4. Validate secret management and environment variables",
            "parentId": "undefined",
            "updatedAt": "2025-11-18T22:30:00.000Z"
          },
          {
            "id": 3,
            "title": "Design and Implement Database Schema",
            "description": "Create the Postgres database schema with all required tables, relationships, constraints, and indexes for the F1 Picks application.",
            "dependencies": [
              "11.1"
            ],
            "details": "1. Set up PostgreSQL database locally for development\n2. Create SQL schema definition with the following tables:\n   - Users (id, email, name, photo_url, created_at)\n   - Leagues (id, name, description, is_global, created_at)\n   - LeagueMembers (user_id, league_id, joined_at)\n   - Events (id, name, circuit_id, start_time, end_time, type, status)\n   - Picks (id, user_id, event_id, prop_type, prop_value, created_at)\n   - Results (id, event_id, prop_type, actual_value, source, ingested_at)\n   - Scores (id, pick_id, points, margin, created_at)\n   - Audit (id, entity_type, entity_id, action, metadata, created_at)\n3. Define primary keys, foreign keys, and constraints\n4. Create appropriate indexes for query performance\n5. Add timestamp fields for created_at/updated_at\n6. Implement soft delete where appropriate\n7. Define enum types for status fields",
            "status": "done",
            "testStrategy": "1. Validate schema with test data insertion\n2. Test foreign key constraints\n3. Verify indexes improve query performance\n4. Test unique constraints and validation rules\n5. Ensure timestamp fields update correctly",
            "parentId": "undefined"
          },
          {
            "id": 4,
            "title": "Configure Database Migrations with Alembic",
            "description": "Set up Alembic for database migrations and create the initial migration script for the schema.",
            "dependencies": [
              "11.3"
            ],
            "details": "1. Install Alembic in the backend project\n2. Initialize Alembic with `alembic init migrations`\n3. Configure Alembic to use SQLAlchemy models\n4. Create database URL configuration with environment variables\n5. Implement SQLAlchemy models matching the database schema\n6. Generate initial migration script with `alembic revision --autogenerate`\n7. Test migration up and down\n8. Create seed data migration for development\n9. Document migration commands in README\n10. Add migration commands to CI/CD pipeline",
            "status": "done",
            "testStrategy": "1. Test migrations on clean database\n2. Verify rollback functionality works correctly\n3. Test migrations with existing data\n4. Validate seed data is correctly inserted\n5. Ensure migrations run in CI pipeline",
            "parentId": "undefined"
          },
          {
            "id": 5,
            "title": "Implement Database Connection and Environment Configuration",
            "description": "Set up database connection pooling, environment variable management, and database access layer for the application.",
            "dependencies": [
              "11.4"
            ],
            "details": "1. Implement connection pooling with SQLAlchemy\n2. Create environment variable configuration with pydantic settings\n3. Set up .env files for local development\n4. Implement database session management\n5. Create base repository pattern for database access\n6. Implement CRUD operations for each model\n7. Add database health check endpoint\n8. Configure connection timeouts and retry logic\n9. Implement database transaction management\n10. Add logging for database operations\n11. Set up database connection for tests with test database",
            "status": "done",
            "testStrategy": "1. Test connection pooling under load\n2. Verify environment variables are correctly loaded\n3. Test database session management\n4. Validate CRUD operations for each model\n5. Test health check endpoint\n6. Verify connection retry logic works",
            "parentId": "undefined",
            "updatedAt": "2025-11-18T22:30:00.000Z"
          }
        ],
        "updatedAt": "2025-11-18T22:30:00.000Z"
      }
    ]
  }
}